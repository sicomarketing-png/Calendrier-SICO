<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Calendrier de l'Avent S.I.C.O.</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Polices : Handlee + Montserrat (Filmotype Honey si tu l'ajoutes c√¥t√© site) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Handlee&family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --sico-red: #e53935;
      --sico-green: #389469;
      --sico-brown: #9f532a;
      --bg-panel: #ffffff;
      --text-main: #111827;
      --text-soft: #6b7280;
      --border-soft: #e5e7eb;
      --radius-lg: 22px;
      --radius-xl: 28px;
      --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.35);
      --transition-fast: 0.18s ease-out;
      --transition-med: 0.25s ease-out;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        linear-gradient(rgba(15,23,42,0.65), rgba(15,23,42,0.85)),
        url("images (1).jpg") center/cover fixed no-repeat;
      color: var(--text-main);
      overflow-x: hidden;
    }

    body.no-scroll { overflow: hidden; }

    .advent-wrapper {
      position: relative;
      width: 100%;
      max-width: 980px;
      background: var(--bg-panel);
      border-radius: var(--radius-xl);
      padding: 22px 22px 26px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(209, 213, 219, 0.9);
      overflow: hidden;
    }

    .advent-wrapper::before {
      content: "";
      position: absolute;
      inset: -80px;
      background-image:
        radial-gradient(circle at 10% 20%, rgba(56, 148, 105, 0.08) 0, transparent 50%),
        radial-gradient(circle at 80% 0%, rgba(229, 57, 53, 0.08) 0, transparent 60%),
        radial-gradient(circle at 20% 100%, rgba(148, 163, 184, 0.18) 0, transparent 55%);
      opacity: 0.8;
      pointer-events: none;
      z-index: 0;
    }

    .advent-inner { position: relative; z-index: 1; }

    header.advent-header {
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 2fr);
      align-items: center;
      gap: 10px 24px;
    }

    .advent-header-text {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .advent-kicker {
      font-size: 0.8rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--sico-green);
      font-weight: 600;
    }

    .advent-title {
      font-family: "Filmotype Honey", "Handlee", cursive;
      font-size: clamp(1.8rem, 2.6vw, 2.3rem);
      font-weight: 400;
      color: var(--text-main);
    }

    .advent-subtitle {
      font-size: 0.95rem;
      color: var(--text-soft);
      max-width: 460px;
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    .advent-meta {
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: flex-end;
      text-align: right;
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    .advent-meta-pill {
      padding: 5px 11px;
      border-radius: 999px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 0.83rem;
      color: #374151;
    }

    .advent-meta-pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--sico-green);
      box-shadow: 0 0 0 3px rgba(56, 148, 105, 0.25);
    }

    #calendar-info {
      font-size: 0.82rem;
      color: var(--text-soft);
    }

    .advent-header-visual {
      grid-column: 2 / 3;
      grid-row: 1 / 3;
      justify-self: end;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .mascot-badge {
      position: relative;
      border-radius: 999px;
      background: linear-gradient(135deg, rgba(229, 57, 53, 0.06), rgba(56, 148, 105, 0.1));
      padding: 6px 12px 6px 6px;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      border: 1px solid rgba(209, 213, 219, 0.9);
    }

    .mascot-badge img {
      width: 64px;
      height: 64px;
      object-fit: contain;
      flex-shrink: 0;
    }

    .mascot-text { display: flex; flex-direction: column; gap: 2px; }

    .mascot-text-title {
      font-weight: 700;
      font-size: 0.9rem;
      color: var(--sico-red);
    }

    .mascot-text-sub {
      font-size: 0.8rem;
      color: var(--text-soft);
    }

    /* === GRILLE 8 x 3 === */
    .calendar-grid {
      margin-top: 22px;
      display: grid;
      grid-template-columns: repeat(8, minmax(80px, 1fr));
      gap: 10px;
    }

    .day-cell {
      position: relative;
      border-radius: 18px;
      border: 2px solid var(--sico-brown);
      background: #ffffff;
      padding: 6px;
      height: 115px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition:
        transform var(--transition-fast),
        box-shadow var(--transition-fast),
        border-color var(--transition-fast),
        background var(--transition-fast),
        color var(--transition-fast);
      color: var(--text-main);
      text-align: center;
      outline: none;
      overflow: hidden;
    }

    .day-cell:focus-visible {
      box-shadow: 0 0 0 2px rgba(56, 148, 105, 0.7);
    }

    .day-number {
      position: absolute;
      top: 0;
      left: 0;
      font-size: 0.9rem;
      font-weight: 700;
      line-height: 1;
      padding: 5px 11px;
      border-radius: 16px 0 16px 0;
      background: var(--sico-brown);
      color: #ffffff;
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    .day-icon {
      width: 80%;
      max-height: 80%;
      margin-top: 10px;
      object-fit: contain;
      pointer-events: none;
    }

    .day-cell.day-open {
      background: #ffffff;
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.18);
    }

    .day-cell.day-open:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 22px rgba(15, 23, 42, 0.26);
      background: #fff7f0;
    }

    .day-cell.day-locked {
      cursor: default;
      background: #fafafa;
      opacity: 0.7;
    }

    .day-cell.day-locked .day-number {
      background: #c4c4c4;
      color: #f9fafb;
    }

    .day-cell.day-locked::after {
      content: "üîí";
      position: absolute;
      top: 4px;
      right: 7px;
      font-size: 0.78rem;
    }

    /* Animation d'ouverture de case */
    .day-cell-open-anim {
      animation: sicoOpen 0.32s cubic-bezier(0.16, 0.72, 0.28, 0.99);
    }

    @keyframes sicoOpen {
      0% {
        transform: scale(0.9);
        box-shadow: 0 0 0 rgba(0, 0, 0, 0);
      }
      60% {
        transform: scale(1.05);
        box-shadow: 0 12px 26px rgba(15, 23, 42, 0.32);
      }
      100% {
        transform: scale(1);
        box-shadow: 0 8px 18px rgba(15, 23, 42, 0.24);
      }
    }

    footer.advent-footer {
      margin-top: 20px;
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
      font-size: 0.8rem;
      color: var(--text-soft);
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    .legend {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .legend-item {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .legend-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      border: 1px solid #9ca3af;
      background: #f3f4f6;
    }

    .legend-dot.open {
      border-color: var(--sico-green);
      background: #dcfce7;
    }

    .legend-dot.locked { background: #e5e7eb; }

    .day-chip {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px dashed rgba(209, 213, 219, 0.9);
      background: #f9fafb;
    }

    /* Mascotte dans le coin bas droit */
    .corner-mascot {
      position: absolute;
      right: -4px;
      bottom: -6px;
      width: 150px;
      max-width: 35vw;
      opacity: 0.75;
      pointer-events: none;
    }

    .corner-mascot img {
      width: 100%;
      height: auto;
    }

    /* MODAL */

    .modal {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.35);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      z-index: 50;
      opacity: 1;
      pointer-events: auto;
      transition: opacity var(--transition-med);
    }

    .modal.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .modal-content {
      position: relative;
      width: 100%;
      max-width: 640px;
      background: #ffffff;
      border-radius: 18px;
      padding: 18px 16px 16px;
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.45);
      border: 1px solid rgba(229, 231, 235, 0.95);
      animation: popIn 0.22s ease-out;
    }

    @keyframes popIn {
      from {
        transform: translateY(6px) scale(0.97);
        opacity: 0;
      }
      to {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 10px;
    }

    .modal-titles { display: flex; flex-direction: column; gap: 3px; }

    #game-title {
      font-size: 1.1rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    #game-title span { font-size: 1.25rem; }

    #game-subtitle {
      font-size: 0.9rem;
      color: var(--text-soft);
    }

    .modal-close {
      border: none;
      border-radius: 999px;
      width: 30px;
      height: 30px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: #f3f4f6;
      color: #4b5563;
      cursor: pointer;
      transition:
        background var(--transition-fast),
        transform var(--transition-fast),
        color var(--transition-fast);
    }

    .modal-close:hover {
      background: #fee2e2;
      color: var(--sico-red);
      transform: translateY(-1px);
    }

    .modal-body {
      margin-top: 12px;
      padding: 12px 12px 10px;
      border-radius: 14px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      max-height: min(420px, 70vh);
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: #9ca3af transparent;
    }

    .modal-body::-webkit-scrollbar { width: 6px; }
    .modal-body::-webkit-scrollbar-track { background: transparent; }
    .modal-body::-webkit-scrollbar-thumb {
      background: #9ca3af;
      border-radius: 999px;
    }

    /* Composants de jeu */

    .game-section + .game-section {
      margin-top: 14px;
      padding-top: 12px;
      border-top: 1px dashed #d1d5db;
    }

    .game-intro {
      font-size: 0.9rem;
      color: var(--text-soft);
      margin-bottom: 8px;
    }

    .game-highlight {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      background: #ecfdf3;
      border: 1px solid rgba(56, 148, 105, 0.45);
      font-size: 0.8rem;
      margin-bottom: 10px;
      color: #166534;
    }

    .game-input-row {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
      flex-wrap: wrap;
    }

    .game-input {
      flex: 1;
      min-width: 0;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      background: #ffffff;
      padding: 7px 10px;
      font-size: 0.9rem;
      color: var(--text-main);
    }

    .game-input:focus-visible {
      outline: none;
      border-color: var(--sico-green);
      box-shadow: 0 0 0 1px rgba(56, 148, 105, 0.6);
    }

    .btn {
      border-radius: 999px;
      border: none;
      padding: 7px 13px;
      font-size: 0.88rem;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: linear-gradient(135deg, var(--sico-red), #b91c1c);
      color: #fef2f2;
      box-shadow: 0 10px 24px rgba(248, 113, 113, 0.35);
      transition:
        transform var(--transition-fast),
        box-shadow var(--transition-fast),
        filter var(--transition-fast);
      white-space: nowrap;
    }

    .btn:hover {
      transform: translateY(-1px);
      filter: brightness(1.04);
      box-shadow: 0 14px 30px rgba(239, 68, 68, 0.4);
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: 0 7px 16px rgba(220, 38, 38, 0.45);
    }

    .btn-secondary {
      background: #ffffff;
      color: #111827;
      border: 1px solid #d1d5db;
      box-shadow: none;
    }

    .btn-secondary:hover { background: #f9fafb; }

    .btn-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 8px;
    }

    .game-feedback {
      font-size: 0.9rem;
      margin-top: 4px;
    }

    .game-feedback.good { color: #166534; }
    .game-feedback.bad { color: #b91c1c; }

    .game-score {
      margin-top: 6px;
      font-size: 0.85rem;
      color: var(--text-soft);
    }

    .game-question-block {
      margin-bottom: 10px;
      padding: 8px 9px;
      border-radius: 12px;
      background: #ffffff;
      border: 1px solid #e5e7eb;
      font-size: 0.88rem;
    }

    .game-question-title {
      font-weight: 600;
      margin-bottom: 6px;
    }

    .game-answers {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .game-answer-option {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.86rem;
      cursor: pointer;
    }

    .game-answer-option input {
      accent-color: var(--sico-green);
      cursor: pointer;
    }

    .game-tag {
      display: inline-flex;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px dashed #d1d5db;
      font-size: 0.75rem;
      color: var(--text-soft);
      margin-bottom: 6px;
      background: #f9fafb;
    }

    .game-list {
      font-size: 0.9rem;
      color: var(--text-soft);
      margin: 4px 0 8px;
      padding-left: 18px;
    }

    .game-list li + li { margin-top: 2px; }

    .game-inline-note {
      font-size: 0.82rem;
      color: var(--text-soft);
      margin-top: 8px;
    }

    @media (max-width: 768px) {
      .advent-wrapper {
        padding: 18px 14px 22px;
        border-radius: 20px;
      }
      header.advent-header {
        grid-template-columns: minmax(0, 1fr);
      }
      .advent-meta {
        align-items: flex-start;
        text-align: left;
      }
      .advent-header-visual { justify-self: flex-start; }
      .corner-mascot {
        width: 120px;
        opacity: 0.65;
      }
      .calendar-grid {
        grid-template-columns: repeat(4, minmax(0, 1fr));
      }
    }

    @media (max-width: 480px) {
      .calendar-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
      .day-cell { height: 100px; }
      .advent-subtitle { max-width: 100%; }
    }
  </style>
</head>
<body>
  <div class="advent-wrapper">
    <div class="advent-inner">
      <header class="advent-header">
        <div class="advent-header-text">
          <div class="advent-kicker">S.I.C.O. vous donne rendez-vous</div>
          <h1 class="advent-title">
            Calendrier de l'Avent S.I.C.O.
          </h1>
          <p class="advent-subtitle">
            Une micro-pause fun par jour jusqu'√† No√´l : 24 mini-jeux, z√©ro prise de t√™te,
            100&nbsp;% bonne humeur dans les couleurs S.I.C.O.
          </p>
        </div>

        <div class="advent-header-visual">
          <div class="mascot-badge">
            <img src="Mascotte-sapin.png" alt="Mascotte S.I.C.O. sapin">
            <div class="mascot-text">
              <div class="mascot-text-title">La mascotte S.I.C.O.</div>
              <div class="mascot-text-sub">
                Ouvre une case, je m'occupe du reste&nbsp;! üéÅ
              </div>
            </div>
          </div>
        </div>

        <div class="advent-meta">
          <div class="advent-meta-pill">
            <span class="advent-meta-pill-dot"></span>
            <span id="today-label"></span>
          </div>
          <span id="calendar-info"></span>
        </div>
      </header>

      <!-- Cases 1 √† 24, 8 par ligne -->
      <section class="calendar-grid" aria-label="Calendrier de l'Avent S.I.C.O.">
        <button type="button" class="day-cell" data-day="1">
          <span class="day-number">1</span>
          <img src="Image calendrier-02.png" alt="Ic√¥ne SICO 1" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="2">
          <span class="day-number">2</span>
          <img src="Image calendrier-03.png" alt="Ic√¥ne SICO 2" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="3">
          <span class="day-number">3</span>
          <img src="Image calendrier-04.png" alt="Ic√¥ne SICO 3" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="4">
          <span class="day-number">4</span>
          <img src="Image calendrier-02.png" alt="Ic√¥ne SICO 1" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="5">
          <span class="day-number">5</span>
          <img src="Image calendrier-03.png" alt="Ic√¥ne SICO 2" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="6">
          <span class="day-number">6</span>
          <img src="Image calendrier-04.png" alt="Ic√¥ne SICO 3" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="7">
          <span class="day-number">7</span>
          <img src="Image calendrier-02.png" alt="Ic√¥ne SICO 1" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="8">
          <span class="day-number">8</span>
          <img src="Image calendrier-03.png" alt="Ic√¥ne SICO 2" class="day-icon">
        </button>

        <button type="button" class="day-cell" data-day="9">
          <span class="day-number">9</span>
          <img src="Image calendrier-04.png" alt="Ic√¥ne SICO 3" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="10">
          <span class="day-number">10</span>
          <img src="Image calendrier-02.png" alt="Ic√¥ne SICO 1" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="11">
          <span class="day-number">11</span>
          <img src="Image calendrier-03.png" alt="Ic√¥ne SICO 2" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="12">
          <span class="day-number">12</span>
          <img src="Image calendrier-04.png" alt="Ic√¥ne SICO 3" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="13">
          <span class="day-number">13</span>
          <img src="Image calendrier-02.png" alt="Ic√¥ne SICO 1" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="14">
          <span class="day-number">14</span>
          <img src="Image calendrier-03.png" alt="Ic√¥ne SICO 2" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="15">
          <span class="day-number">15</span>
          <img src="Image calendrier-04.png" alt="Ic√¥ne SICO 3" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="16">
          <span class="day-number">16</span>
          <img src="Image calendrier-02.png" alt="Ic√¥ne SICO 1" class="day-icon">
        </button>

        <button type="button" class="day-cell" data-day="17">
          <span class="day-number">17</span>
          <img src="Image calendrier-03.png" alt="Ic√¥ne SICO 2" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="18">
          <span class="day-number">18</span>
          <img src="Image calendrier-04.png" alt="Ic√¥ne SICO 3" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="19">
          <span class="day-number">19</span>
          <img src="Image calendrier-02.png" alt="Ic√¥ne SICO 1" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="20">
          <span class="day-number">20</span>
          <img src="Image calendrier-03.png" alt="Ic√¥ne SICO 2" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="21">
          <span class="day-number">21</span>
          <img src="Image calendrier-04.png" alt="Ic√¥ne SICO 3" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="22">
          <span class="day-number">22</span>
          <img src="Image calendrier-02.png" alt="Ic√¥ne SICO 1" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="23">
          <span class="day-number">23</span>
          <img src="Image calendrier-03.png" alt="Ic√¥ne SICO 2" class="day-icon">
        </button>
        <button type="button" class="day-cell" data-day="24">
          <span class="day-number">24</span>
          <img src="Image calendrier-04.png" alt="Ic√¥ne SICO 3" class="day-icon">
        </button>
      </section>

      <footer class="advent-footer">
        <div class="legend" aria-hidden="true">
          <span class="legend-item">
            <span class="legend-dot open"></span>
            Cases accessibles
          </span>
          <span class="legend-item">
            <span class="legend-dot locked"></span>
            Cases encore √† venir
          </span>
        </div>
        <div class="day-chip">
          Mini-jeux de 2‚Äì3 minutes, √† d√©gainer en pause caf√© ‚òï
        </div>
      </footer>
    </div>

    <div class="corner-mascot">
      <img src="Mascotte-sapin.png" alt="Mascotte S.I.C.O. sapin">
    </div>
  </div>

  <!-- MODAL / POPUP DE JEU -->
  <div class="modal hidden" id="game-modal" aria-modal="true" role="dialog">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-titles">
          <div id="game-title"></div>
          <div id="game-subtitle"></div>
        </div>
        <button class="modal-close" type="button" aria-label="Fermer">
          ‚úï
        </button>
      </div>
      <div class="modal-body">
        <div id="game-container"></div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      "use strict";

      const TEST_MODE = false; // Passe √† true si tu veux tout d√©bloquer en d√©mo

      const cells = document.querySelectorAll(".day-cell");
      const modal = document.getElementById("game-modal");
      const gameContainer = document.getElementById("game-container");
      const closeBtn = document.querySelector(".modal-close");
      const titleEl = document.getElementById("game-title");
      const subtitleEl = document.getElementById("game-subtitle");
      const infoText = document.getElementById("calendar-info");
      const todayLabel = document.getElementById("today-label");

      const now = new Date();
      const isDecember = now.getMonth() === 11; // D√©cembre = 11
      const todayDateStr = now.toLocaleDateString("fr-FR", {
        weekday: "long",
        day: "2-digit",
        month: "long",
        year: "numeric"
      });
      if (todayLabel) {
        todayLabel.textContent = "Nous sommes le " + todayDateStr;
      }

      let maxOpenDay;
      if (TEST_MODE || !isDecember) {
        maxOpenDay = 24;
        if (infoText) {
          infoText.textContent =
            "Mode d√©mo : toutes les cases sont ouvertes. En d√©cembre, l'ouverture est limit√©e au jour J.";
        }
      } else {
        maxOpenDay = Math.min(now.getDate(), 24);
        if (infoText) {
          infoText.textContent =
            "Tu peux ouvrir les cases du 1 au " + maxOpenDay + " d√©cembre.";
        }
      }

      const dayConfigs = {
        1: { type: "guess", max: 10, attempts: 3, subtitle: "Jeu : devine le nombre (version facile)" },
        2: {
          type: "quiz",
          subtitle: "Quiz sp√©cial hiver",
          questions: [
            {
              question: "Quel mois commence officiellement l'hiver en France ?",
              choices: ["Octobre", "D√©cembre", "Janvier"],
              correctIndex: 1
            },
            {
              question: "Que met-on le plus souvent en haut du sapin ?",
              choices: ["Une orange", "Une √©toile ou un ange", "Un bonnet"],
              correctIndex: 1
            }
          ]
        },
        3: {
          type: "riddle",
          subtitle: "Devinettes enneig√©es",
          riddles: [
            {
              question: "Je tombe en hiver mais je ne me fais pas mal. Qui suis-je ?",
              answer: "neige"
            },
            {
              question: "Je brille la nuit, surtout lorsqu'il fait bien noir en hiver.",
              answer: "√©toiles"
            }
          ]
        },
        4: {
          type: "coin",
          subtitle: "Pile ou face givr√©",
          targetScore: 3
        },
        5: {
          type: "anagram",
          subtitle: "Anagrammes de No√´l",
          words: ["NOEL", "SAPIN", "RENNE", "NEIGE", "CADEAU"]
        },
        6: {
          type: "pfc",
          subtitle: "Pierre ‚Äì Feuille ‚Äì Ciseaux",
          targetScore: 3
        },
        7: {
          type: "math",
          subtitle: "Calcul mental express",
          count: 5
        },
        8: {
          type: "guess",
          subtitle: "Devine le nombre (niveau moyen)",
          max: 20,
          attempts: 5
        },
        9: {
          type: "quiz",
          subtitle: "Quiz sp√©cial No√´l",
          questions: [
            {
              question: "Dans quel pays est n√©e la version moderne du P√®re No√´l (costume rouge) ?",
              choices: ["France", "√âtats-Unis", "Finlande"],
              correctIndex: 1
            },
            {
              question: "Quel animal tire traditionnellement le tra√Æneau du P√®re No√´l ?",
              choices: ["Des chevaux", "Des chiens", "Des rennes"],
              correctIndex: 2
            }
          ]
        },
        10: {
          type: "riddle",
          subtitle: "Devinettes cocooning",
          riddles: [
            { question: "Je suis chaud, souvent en laine, on me met aux pieds.", answer: "chaussettes" },
            { question: "Je craque, je fond, et je sens bon : qui suis-je ?", answer: "bougie" }
          ]
        },
        11: {
          type: "coin",
          subtitle: "Pile ou face ‚Äì la revanche",
          targetScore: 3
        },
        12: {
          type: "anagram",
          subtitle: "Anagrammes gourmands",
          words: ["BUCHE", "CHOCOLAT", "BISCUIT", "BONBON"]
        },
        13: {
          type: "pfc",
          subtitle: "Pierre ‚Äì Feuille ‚Äì Ciseaux (match retour)",
          targetScore: 3
        },
        14: {
          type: "math",
          subtitle: "Calcul mental enneig√©",
          count: 5
        },
        15: {
          type: "guess",
          subtitle: "Devine le nombre (grande fourchette)",
          max: 50,
          attempts: 7
        },
        16: {
          type: "quiz",
          subtitle: "Quiz ambiance f√™te",
          questions: [
            {
              question: "Quel dessert est typiquement servi √† No√´l en France ?",
              choices: ["Galette des rois", "B√ªche de No√´l", "Tarte aux fraises"],
              correctIndex: 1
            },
            {
              question: "Que trouve-t-on le plus souvent sous le sapin ?",
              choices: ["Des cadeaux", "Des chaussures", "Des parasols"],
              correctIndex: 0
            }
          ]
        },
        17: {
          type: "riddle",
          subtitle: "Devinettes du feu de chemin√©e",
          riddles: [
            { question: "Je cr√©pite dans le foyer et je r√©chauffe la pi√®ce.", answer: "feu" },
            {
              question: "On me boit chaud, avec du chocolat et parfois de la chantilly.",
              answer: "chocolat chaud"
            }
          ]
        },
        18: {
          type: "coin",
          subtitle: "Pile ou face express",
          targetScore: 2
        },
        19: {
          type: "anagram",
          subtitle: "Anagrammes givr√©s",
          words: ["HIVER", "GANTS", "BONNET", "ECHARPE"]
        },
        20: {
          type: "pfc",
          subtitle: "Pierre ‚Äì Feuille ‚Äì Ciseaux (dernier duel)",
          targetScore: 3
        },
        21: {
          type: "math",
          subtitle: "Calcul mental ‚Äì final sprint",
          count: 7
        },
        22: {
          type: "guess",
          subtitle: "Devine le nombre (derni√®re chance)",
          max: 30,
          attempts: 6
        },
        23: {
          type: "gift",
          subtitle: "Tirage de cadeau (100 % virtuel, 100 % bonne humeur)",
          gifts: [
            "un mug de No√´l rempli de chocolat chaud virtuel ‚òï",
            "une journ√©e sans r√©unions (dans tes r√™ves, mais on y croit) üòÑ",
            "une paire de chaussettes moches, mais incroyablement confortables üß¶",
            "un c√¢lin de renne num√©rique ü¶å",
            "une playlist de chants de No√´l qui reste dans la t√™te toute la journ√©e üé∂",
            "un pull de No√´l tr√®s kitch, assum√© √† 200 % üéÅ"
          ]
        },
        24: {
          type: "mix",
          subtitle: "Case sp√©ciale du 24 : mini-combo avant No√´l",
          gifts: [
            "un fou rire collectif en visio (√† programmer)",
            "un plaid imaginaire ultra-doux pour tout le monde üõãÔ∏è",
            "un stock illimit√© de chocolats invisibles (0 calories garanties) üç´"
          ]
        }
      };

      // Marquage des cases (ouvertes / verrouill√©es)
      cells.forEach((cell) => {
        const day = parseInt(cell.dataset.day, 10);
        if (Number.isNaN(day)) return;

        if (day <= maxOpenDay) {
          cell.classList.add("day-open");
          cell.addEventListener("click", () => openGame(day));
        } else {
          cell.classList.add("day-locked");
          cell.addEventListener("click", () => showLockedMessage(day));
        }
      });

      function showLockedMessage(day) {
        let msg;
        if (TEST_MODE || !isDecember) {
          msg =
            "Dans la version r√©elle, la case " +
            day +
            " ne sera disponible qu'√† partir du " +
            day +
            " d√©cembre. (Ici tout est ouvert pour test.)";
        } else {
          msg = "Patience ! La case " + day + " sera disponible √† partir du " + day + " d√©cembre. üéÅ";
        }
        alert(msg);
      }

      function openModal() {
        modal.classList.remove("hidden");
        document.body.classList.add("no-scroll");
      }

      function closeModal() {
        modal.classList.add("hidden");
        document.body.classList.remove("no-scroll");
        gameContainer.innerHTML = "";
      }

      closeBtn.addEventListener("click", closeModal);
      modal.addEventListener("click", (event) => {
        if (event.target === modal) {
          closeModal();
        }
      });

      function animateCell(day) {
        const cell = document.querySelector('.day-cell[data-day="' + day + '"]');
        if (!cell) return;
        cell.classList.remove("day-cell-open-anim");
        void cell.offsetWidth;
        cell.classList.add("day-cell-open-anim");
      }

      function openGame(day) {
        const config = dayConfigs[day] || {};
        titleEl.textContent = "Case n¬∞" + day + " ";
        const emoji = document.createElement("span");
        emoji.textContent = day === 24 ? "üéÖ" : "üéÅ";
        titleEl.appendChild(emoji);

        subtitleEl.textContent = config.subtitle || "Mini-jeu de No√´l";

        gameContainer.innerHTML = "";

        switch (config.type) {
          case "guess":
            renderGuessGame(gameContainer, config);
            break;
          case "quiz":
            renderQuizGame(gameContainer, config);
            break;
          case "riddle":
            renderRiddleGame(gameContainer, config);
            break;
          case "coin":
            renderCoinGame(gameContainer, config);
            break;
          case "pfc":
            renderPfcGame(gameContainer, config);
            break;
          case "math":
            renderMathGame(gameContainer, config);
            break;
          case "anagram":
            renderAnagramGame(gameContainer, config);
            break;
          case "gift":
            renderGiftGame(gameContainer, config);
            break;
          case "mix":
            renderMixGame(gameContainer, config);
            break;
          default:
            gameContainer.textContent = "Mini-jeu en pr√©paration‚Ä¶";
        }

        animateCell(day);
        openModal();
      }

      /* ==== OUTILS MINI-JEUX ==== */

      function createSection(container, titleText) {
        const section = document.createElement("section");
        section.className = "game-section";

        if (titleText) {
          const tag = document.createElement("div");
          tag.className = "game-tag";
          tag.textContent = titleText;
          section.appendChild(tag);
        }
        container.appendChild(section);
        return section;
      }

      // Devine le nombre
      function renderGuessGame(container, config) {
        const max = config.max || 10;
               const attemptsMax = config.attempts || 3;
        const secret = Math.floor(Math.random() * max) + 1;
        let remaining = attemptsMax;
        let finished = false;

        const section = createSection(container, "Devine le nombre");
        const intro = document.createElement("p");
        intro.className = "game-intro";
        intro.textContent =
          "Je pense √† un nombre entre 1 et " +
          max +
          ". Tu as " +
          attemptsMax +
          " essai(s) pour le trouver.";
        section.appendChild(intro);

        const row = document.createElement("div");
        row.className = "game-input-row";

        const input = document.createElement("input");
        input.type = "number";
        input.min = "1";
        input.max = String(max);
        input.className = "game-input";
        input.placeholder = "Ta proposition‚Ä¶";

        const button = document.createElement("button");
        button.type = "button";
        button.className = "btn";
        button.textContent = "Valider";

        row.appendChild(input);
        row.appendChild(button);
        section.appendChild(row);

        const feedback = document.createElement("p");
        feedback.className = "game-feedback";
        section.appendChild(feedback);

        const score = document.createElement("p");
        score.className = "game-score";
        score.textContent = "Essais restants : " + remaining;
        section.appendChild(score);

        button.addEventListener("click", () => {
          if (finished) return;
          const value = parseInt(input.value, 10);
          if (Number.isNaN(value)) {
            feedback.textContent = "Entre un nombre valide.";
            feedback.className = "game-feedback bad";
            return;
          }
          if (value < 1 || value > max) {
            feedback.textContent = "Le nombre doit √™tre entre 1 et " + max + ".";
            feedback.className = "game-feedback bad";
            return;
          }

          if (value === secret) {
            feedback.innerHTML = "<strong>Bravo !</strong> Tu as trouv√© le nombre magique ‚ú®";
            feedback.className = "game-feedback good";
            finished = true;
            score.textContent = "Partie termin√©e.";
            input.disabled = true;
            button.disabled = true;
          } else {
            remaining -= 1;
            if (remaining <= 0) {
              feedback.innerHTML =
                "Perdu‚Ä¶ Le nombre √©tait <strong>" + secret + "</strong>. On retentera ! üòâ";
              feedback.className = "game-feedback bad";
              score.textContent = "Essais restants : 0";
              finished = true;
              input.disabled = true;
              button.disabled = true;
            } else {
              feedback.textContent = value < secret ? "C'est plus grand." : "C'est plus petit.";
              feedback.className = "game-feedback";
              score.textContent = "Essais restants : " + remaining;
            }
          }
        });
      }

      // Quiz
      function renderQuizGame(container, config) {
        const questions = config.questions || [];
        const section = createSection(container, "Quiz express");

        const intro = document.createElement("p");
        intro.className = "game-intro";
        intro.textContent = "R√©ponds en choisissant la meilleure option pour chaque question.";
        section.appendChild(intro);

        const form = document.createElement("form");

        questions.forEach((q, index) => {
          const block = document.createElement("div");
          block.className = "game-question-block";
          block.dataset.questionIndex = String(index);

          const qTitle = document.createElement("div");
          qTitle.className = "game-question-title";
          qTitle.textContent = "Question " + (index + 1) + " ‚Äì " + q.question;
          block.appendChild(qTitle);

          const answersWrap = document.createElement("div");
          answersWrap.className = "game-answers";

          (q.choices || []).forEach((choice, i) => {
            const label = document.createElement("label");
            label.className = "game-answer-option";

            const input = document.createElement("input");
            input.type = "radio";
            input.name = "q" + index;
            input.value = String(i);

            const span = document.createElement("span");
            const letter = String.fromCharCode(65 + i); // A, B, C...
            span.textContent = letter + ") " + choice;

            label.appendChild(input);
            label.appendChild(span);
            answersWrap.appendChild(label);
          });

          block.appendChild(answersWrap);
          form.appendChild(block);
        });

        const btnRow = document.createElement("div");
        btnRow.className = "btn-group";
        const submitBtn = document.createElement("button");
        submitBtn.type = "submit";
        submitBtn.className = "btn";
        submitBtn.textContent = "Valider mes r√©ponses";
        btnRow.appendChild(submitBtn);
        form.appendChild(btnRow);

        const feedback = document.createElement("p");
        feedback.className = "game-feedback";
        form.appendChild(feedback);

        form.addEventListener("submit", (event) => {
          event.preventDefault();
          let score = 0;
          questions.forEach((q, index) => {
            const selected = form.querySelector(
              'input[name="q' + index + '"]:checked'
            );
            if (!selected) return;
            const value = parseInt(selected.value, 10);
            if (value === q.correctIndex) {
              score += 1;
            }
          });
          feedback.innerHTML =
            "R√©sultat : <strong>" +
            score +
            "</strong> bonne(s) r√©ponse(s) sur " +
            questions.length +
            ".";
          feedback.className =
            "game-feedback " +
            (score >= Math.ceil(questions.length / 2) ? "good" : "bad");
        });

        section.appendChild(form);
      }

      // Devinettes
      function renderRiddleGame(container, config) {
        const riddles = config.riddles || [];
        const section = createSection(container, "Devinettes");

        const intro = document.createElement("p");
        intro.className = "game-intro";
        intro.textContent =
          "√âcris ce qui te semble √™tre la r√©ponse. Reste dans l'ambiance hiver / No√´l.";
        section.appendChild(intro);

        const form = document.createElement("form");
        const feedback = document.createElement("p");
        feedback.className = "game-feedback";

        riddles.forEach((r) => {
          const block = document.createElement("div");
          block.className = "game-question-block";

          const title = document.createElement("div");
          title.className = "game-question-title";
          title.textContent = "üëâ " + r.question;
          block.appendChild(title);

          const row = document.createElement("div");
          row.className = "game-input-row";

          const input = document.createElement("input");
          input.type = "text";
          input.className = "game-input";
          input.placeholder = "Ta r√©ponse‚Ä¶";
          input.dataset.answer = (r.answer || "").toLowerCase();

          row.appendChild(input);
          block.appendChild(row);
          form.appendChild(block);
        });

        const btnRow = document.createElement("div");
        btnRow.className = "btn-group";
        const submitBtn = document.createElement("button");
        submitBtn.type = "submit";
        submitBtn.className = "btn";
        submitBtn.textContent = "V√©rifier";
        btnRow.appendChild(submitBtn);
        form.appendChild(btnRow);
        form.appendChild(feedback);

        form.addEventListener("submit", (event) => {
          event.preventDefault();
          let good = 0;
          const inputs = form.querySelectorAll("input.game-input");
          inputs.forEach((input) => {
            const expected = (input.dataset.answer || "").trim();
            const value = (input.value || "").trim().toLowerCase();
            if (!expected) return;
            if (value && value.includes(expected)) {
              good += 1;
            }
          });

          feedback.innerHTML =
            "Tu en as trouv√© <strong>" +
            good +
            "</strong> sur " +
            riddles.length +
            ".";
          feedback.className =
            "game-feedback " +
            (good >= Math.ceil(riddles.length / 2) ? "good" : "bad");
        });

        section.appendChild(form);
      }

      // Pile ou face
      function renderCoinGame(container, config) {
        const target = config.targetScore || 3;
        let player = 0;
        let ordi = 0;
        let finished = false;

        const section = createSection(container, "Pile ou face");

        const intro = document.createElement("p");
        intro.className = "game-intro";
        intro.textContent =
          "Choisis pile ou face. Tu marques 1 point √† chaque fois que tu devines correctement. Le premier √† " +
          target +
          " points gagne.";
        section.appendChild(intro);

        const buttons = document.createElement("div");
        buttons.className = "btn-group";

        const btnPile = document.createElement("button");
        btnPile.type = "button";
        btnPile.className = "btn-secondary";
        btnPile.textContent = "Pile";

        const btnFace = document.createElement("button");
        btnFace.type = "button";
        btnFace.className = "btn-secondary";
        btnFace.textContent = "Face";

        buttons.appendChild(btnPile);
        buttons.appendChild(btnFace);
        section.appendChild(buttons);

        const feedback = document.createElement("p");
        feedback.className = "game-feedback";
        section.appendChild(feedback);

        const score = document.createElement("p");
        score.className = "game-score";
        score.textContent = "Score : Toi 0 ‚Äì Ordi 0";
        section.appendChild(score);

        function handleChoice(choice) {
          if (finished) return;
          const tirage = Math.random() < 0.5 ? "Pile" : "Face";
          const good = tirage.toLowerCase() === choice.toLowerCase();
          if (good) {
            player += 1;
            feedback.textContent = "La pi√®ce retombe sur " + tirage + " : bien jou√©, +1 point pour toi !";
            feedback.className = "game-feedback good";
          } else {
            ordi += 1;
            feedback.textContent = "La pi√®ce retombe sur " + tirage + ". Cette fois c'est pour l'ordi‚Ä¶";
            feedback.className = "game-feedback bad";
          }

          score.textContent = "Score : Toi " + player + " ‚Äì Ordi " + ordi;

          if (player >= target || ordi >= target) {
            finished = true;
            if (player > ordi) {
              feedback.textContent += " üéâ Tu gagnes la partie !";
            } else {
              feedback.textContent += " üòà L'ordinateur gagne cette manche.";
            }
          }
        }

        btnPile.addEventListener("click", () => handleChoice("pile"));
        btnFace.addEventListener("click", () => handleChoice("face"));
      }

      // Pierre ‚Äì Feuille ‚Äì Ciseaux
      function renderPfcGame(container, config) {
        const target = config.targetScore || 3;
        let player = 0;
        let ordi = 0;
        let finished = false;

        const mapping = {
          pierre: "‚úä Pierre",
          feuille: "‚úã Feuille",
          ciseaux: "‚úåÔ∏è Ciseaux"
        };
        const values = Object.keys(mapping);

        const section = createSection(container, "Pierre ‚Äì Feuille ‚Äì Ciseaux");

        const intro = document.createElement("p");
        intro.className = "game-intro";
        intro.textContent =
          "Choisis ton arme. Pierre bat les ciseaux, ciseaux battent la feuille, feuille bat la pierre.";
        section.appendChild(intro);

        const buttons = document.createElement("div");
        buttons.className = "btn-group";

        values.forEach((key) => {
          const btn = document.createElement("button");
          btn.type = "button";
          btn.className = "btn-secondary";
          btn.textContent = mapping[key];
          btn.addEventListener("click", () => handleChoice(key));
          buttons.appendChild(btn);
        });

        section.appendChild(buttons);

        const feedback = document.createElement("p");
        feedback.className = "game-feedback";
        section.appendChild(feedback);

        const score = document.createElement("p");
        score.className = "game-score";
        score.textContent = "Score : Toi 0 ‚Äì Ordi 0";
        section.appendChild(score);

        function mancheResult(joueur, machine) {
          if (joueur === machine) return 0;
          if (
            (joueur === "pierre" && machine === "ciseaux") ||
            (joueur === "ciseaux" && machine === "feuille") ||
            (joueur === "feuille" && machine === "pierre")
          ) {
            return 1;
          }
          return -1;
        }

        function handleChoice(choice) {
          if (finished) return;
          const machine = values[Math.floor(Math.random() * values.length)];
          const res = mancheResult(choice, machine);

          if (res === 0) {
            feedback.textContent =
              "Tu joues " + mapping[choice] + ", l'ordi joue " + mapping[machine] + " : √©galit√©.";
            feedback.className = "game-feedback";
          } else if (res > 0) {
            player += 1;
            feedback.textContent =
              "Tu joues " +
              mapping[choice] +
              ", l'ordi joue " +
              mapping[machine] +
              " : tu gagnes cette manche !";
            feedback.className = "game-feedback good";
          } else {
            ordi += 1;
            feedback.textContent =
              "Tu joues " +
              mapping[choice] +
              ", l'ordi joue " +
              mapping[machine] +
              " : l'ordinateur remporte cette manche.";
            feedback.className = "game-feedback bad";
          }

          score.textContent = "Score : Toi " + player + " ‚Äì Ordi " + ordi;

          if (player >= target || ordi >= target) {
            finished = true;
            if (player > ordi) {
              feedback.textContent += " üéâ Tu remportes la partie !";
            } else {
              feedback.textContent += " üòà L'ordinateur gagne cette fois.";
            }
          }
        }
      }

      // Calcul mental
      function renderMathGame(container, config) {
        const count = config.count || 5;
        const section = createSection(container, "Calcul mental");

        const intro = document.createElement("p");
        intro.className = "game-intro";
        intro.textContent =
          "R√©ponds de t√™te si tu peux. Rien ne t'emp√™che de sortir un brouillon‚Ä¶ ü§´";
        section.appendChild(intro);

        const questionEl = document.createElement("p");
        questionEl.className = "game-question-title";
        section.appendChild(questionEl);

        const row = document.createElement("div");
        row.className = "game-input-row";

        const input = document.createElement("input");
        input.type = "number";
        input.className = "game-input";
        input.placeholder = "R√©ponse‚Ä¶";

        const button = document.createElement("button");
        button.type = "button";
        button.className = "btn";
        button.textContent = "Valider";

        row.appendChild(input);
        row.appendChild(button);
        section.appendChild(row);

        const feedback = document.createElement("p");
        feedback.className = "game-feedback";
        section.appendChild(feedback);

        const score = document.createElement("p");
        score.className = "game-score";
        section.appendChild(score);

        const questions = [];
        const ops = ["+", "-", "√ó"];

        for (let i = 0; i < count; i += 1) {
          const a = Math.floor(Math.random() * 12) + 1;
          const b = Math.floor(Math.random() * 12) + 1;
          const op = ops[Math.floor(Math.random() * ops.length)];
          let solution;
          if (op === "+") solution = a + b;
          else if (op === "-") solution = a - b;
          else solution = a * b;
          questions.push({ a, b, op, solution });
        }

        let current = 0;
        let good = 0;

        function showQuestion() {
          const q = questions[current];
          questionEl.textContent =
            "Question " + (current + 1) + " / " + count + " : " + q.a + " " + q.op + " " + q.b + " = ?";
          input.value = "";
          input.focus();
          score.textContent = "Score provisoire : " + good + " bonne(s) r√©ponse(s).";
        }

        function handleAnswer() {
          const raw = input.value.trim();
          if (!raw) {
            feedback.textContent = "Entre une r√©ponse num√©rique.";
            feedback.className = "game-feedback bad";
            return;
          }
          const value = parseInt(raw, 10);
          const expected = questions[current].solution;
          if (value === expected) {
            good += 1;
            feedback.textContent = "‚úÖ Parfait !";
            feedback.className = "game-feedback good";
          } else {
            feedback.textContent =
              "‚ùå Rat√©, la bonne r√©ponse √©tait " + expected + ".";
            feedback.className = "game-feedback bad";
          }

          current += 1;
          if (current >= count) {
            score.textContent =
              "R√©sultat final : " + good + " / " + count + " bonne(s) r√©ponse(s).";
            button.disabled = true;
            input.disabled = true;
          } else {
            showQuestion();
          }
        }

        button.addEventListener("click", handleAnswer);
        input.addEventListener("keydown", (event) => {
          if (event.key === "Enter") {
            handleAnswer();
          }
        });

        showQuestion();
      }

      // Anagrammes
      function renderAnagramGame(container, config) {
        const words = config.words || [];
        const section = createSection(container, "Anagrammes de No√´l");

        const intro = document.createElement("p");
        intro.className = "game-intro";
        intro.textContent =
          "Retrouve le mot cach√©. Il est li√© √† l'hiver, √† No√´l ou √† l'ambiance cocooning.";
        section.appendChild(intro);

        if (!words.length) {
          section.appendChild(document.createTextNode("Pas de mot configur√©."));
          return;
        }

        const word = words[Math.floor(Math.random() * words.length)];
        const letters = word.split("");
        for (let i = letters.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          const tmp = letters[i];
          letters[i] = letters[j];
          letters[j] = tmp;
        }
        const scrambled = letters.join("");

        const highlight = document.createElement("div");
        highlight.className = "game-highlight";
        highlight.textContent = "Anagramme : " + scrambled;
        section.appendChild(highlight);

        const row = document.createElement("div");
        row.className = "game-input-row";

        const input = document.createElement("input");
        input.type = "text";
        input.className = "game-input";
        input.placeholder = "Ta proposition‚Ä¶";

        const button = document.createElement("button");
        button.type = "button";
        button.className = "btn";
        button.textContent = "Valider";

        row.appendChild(input);
        row.appendChild(button);
        section.appendChild(row);

        const feedback = document.createElement("p");
        feedback.className = "game-feedback";
        section.appendChild(feedback);

        button.addEventListener("click", () => {
          const guess = (input.value || "").trim().toLowerCase();
          const expected = word.toLowerCase();
          if (!guess) {
            feedback.textContent = "√âcris quelque chose üôÇ";
            feedback.className = "game-feedback bad";
            return;
          }
          if (guess === expected) {
            feedback.textContent = "Bravo, tu as l'≈ìil ! üß†";
            feedback.className = "game-feedback good";
          } else {
            feedback.textContent = "Pas tout √† fait‚Ä¶ Le mot √©tait : " + word;
            feedback.className = "game-feedback bad";
          }
          button.disabled = true;
          input.disabled = true;
        });
      }

      // Cadeau
      function renderGiftGame(container, config) {
        const gifts = config.gifts || [];
        const section = createSection(container, "Tirage cadeau");

        const intro = document.createElement("p");
        intro.className = "game-intro";
        intro.textContent =
          "Clique sur le bouton pour lancer la roue des cadeaux 100 % virtuels, 0 % budget.";
        section.appendChild(intro);

        const btnRow = document.createElement("div");
        btnRow.className = "btn-group";

        const button = document.createElement("button");
        button.type = "button";
        button.className = "btn";
        button.textContent = "Lancer le tirage üéÅ";

        btnRow.appendChild(button);
        section.appendChild(btnRow);

        const feedback = document.createElement("p");
        feedback.className = "game-feedback";
        section.appendChild(feedback);

        button.addEventListener("click", () => {
          if (!gifts.length) {
            feedback.textContent = "Pas de cadeaux configur√©s‚Ä¶ mais tu peux t'en inventer un üòÑ";
            feedback.className = "game-feedback bad";
            return;
          }
          const gift = gifts[Math.floor(Math.random() * gifts.length)];
          feedback.innerHTML = "Et tu gagnes‚Ä¶ <strong>" + gift + "</strong>";
          feedback.className = "game-feedback good";
        });
      }

      // Mix du 24 : petit combo
      function renderMixGame(container, config) {
        const section1 = createSection(container, "Mini calcul (3 questions)");
        renderMathGame(section1, { count: 3 });

        const section2 = createSection(container, "Une devinette");
        const list = document.createElement("ul");
        list.className = "game-list";

        const item = document.createElement("li");
        item.textContent = "Je suis vert ou artificiel, on me d√©core de guirlandes : qui suis-je ?";
        list.appendChild(item);
        section2.appendChild(list);

        const row = document.createElement("div");
        row.className = "game-input-row";
        const input = document.createElement("input");
        input.type = "text";
        input.className = "game-input";
        input.placeholder = "Ta r√©ponse‚Ä¶";
        const button = document.createElement("button");
        button.type = "button";
        button.className = "btn-secondary";
        button.textContent = "V√©rifier";
        row.appendChild(input);
        row.appendChild(button);
        section2.appendChild(row);

        const feedback = document.createElement("p");
        feedback.className = "game-feedback";
        section2.appendChild(feedback);

        button.addEventListener("click", () => {
          const value = (input.value || "").trim().toLowerCase();
          if (!value) {
            feedback.textContent = "Essaye quelque chose üôÇ";
            feedback.className = "game-feedback bad";
            return;
          }
          if (value.includes("sapin")) {
            feedback.textContent = "Oui ! C'√©tait bien le sapin de No√´l üéÑ";
            feedback.className = "game-feedback good";
          } else {
            feedback.textContent = "Presque‚Ä¶ on pensait au sapin de No√´l.";
            feedback.className = "game-feedback bad";
          }
          button.disabled = true;
          input.disabled = true;
        });

        const section3 = createSection(container, "Cadeau final");
        renderGiftGame(section3, config);
        const note = document.createElement("p");
        note.className = "game-inline-note";
        note.textContent =
          "Merci d'avoir jou√© tout le mois ! Cette case peut servir de pr√©texte √† un dernier moment fun en √©quipe. üíö";
        section3.appendChild(note);
      }
    });
  </script>
</body>
</html>
